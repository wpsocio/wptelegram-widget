{"version":3,"file":"blocks-BqkY2cvN.js","sources":["../../../../../../packages/js/utilities/blocks.ts","../../../../js/blocks/ajax-channel-feed/Output.tsx","../../../../js/blocks/ajax-channel-feed/Edit.tsx","../../../../js/blocks/ajax-channel-feed/constants.ts","../../../../js/blocks/ajax-channel-feed/index.tsx","../../../../js/blocks/channel-feed/Output.tsx","../../../../js/blocks/channel-feed/Edit.tsx","../../../../js/blocks/channel-feed/constants.ts","../../../../js/blocks/channel-feed/index.tsx","../../../../js/blocks/useData.ts","../../../../js/blocks/join-channel/Controls.tsx","../../../../js/blocks/join-channel/TelegramIcon.tsx","../../../../js/blocks/join-channel/JoinButton.tsx","../../../../js/blocks/join-channel/constants.ts","../../../../js/blocks/join-channel/index.tsx","../../../../js/blocks/single-post/Controls.tsx","../../../../js/blocks/single-post/Placeholder.tsx","../../../../js/blocks/single-post/Edit.tsx","../../../../js/blocks/single-post/constants.ts","../../../../js/blocks/single-post/index.tsx"],"sourcesContent":["export const buildShortCodeFromAtts = (\n\tattributes: Record<string, unknown>,\n\tallowedAtts: Array<string>,\n\tshrotcode: string,\n): string => {\n\tconst attsKV = allowedAtts\n\t\t.filter((att) => attributes?.[att])\n\t\t.map((att) => `${att}=\"${attributes[att]}\"`);\n\n\tconst atts = attsKV.length ? ` ${attsKV.join(' ')}` : '';\n\n\treturn `[${shrotcode} ${atts}]`;\n};\n","import { buildShortCodeFromAtts } from '@wpsocio/utilities/blocks';\n\nconst allowedAtts = ['widget_width', 'widget_height', 'username'];\nconst shortcode = 'wptelegram-ajax-widget';\n\nexport const Output: React.FC<{\n\tattributes: Record<string, string | number>;\n}> = ({ attributes }) => {\n\treturn <>{buildShortCodeFromAtts(attributes, allowedAtts, shortcode)}</>;\n};\n","import { InspectorControls } from '@wordpress/block-editor';\nimport type { BlockEditProps } from '@wordpress/blocks';\nimport { Dashicon, PanelBody, TextControl } from '@wordpress/components';\nimport { useCallback } from '@wordpress/element';\n\nimport { __, sprintf } from '@wpsocio/i18n';\n\nimport type { AjaxWidgetAtts } from '../types';\nimport { Output } from './Output';\n\nconst savedSettings = (window.wptelegram_widget?.savedSettings ||\n\t{}) as AjaxWidgetAtts;\n\nexport const Edit: React.FC<BlockEditProps<AjaxWidgetAtts>> = ({\n\tattributes,\n\tsetAttributes,\n\tclassName,\n}) => {\n\tconst { widget_width, widget_height, username } = attributes;\n\n\tconst onChangeWidth = useCallback(\n\t\t(newWidth: string) => setAttributes({ widget_width: newWidth }),\n\t\t[setAttributes],\n\t);\n\tconst onChangeHeight = useCallback(\n\t\t(newHeight: string) => setAttributes({ widget_height: newHeight }),\n\t\t[setAttributes],\n\t);\n\tconst onChangeUsername = useCallback(\n\t\t(newUsername: string) =>\n\t\t\tsetAttributes({ username: newUsername?.replace('@', '') }),\n\t\t[setAttributes],\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={__('Widget Options')}>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('Username')}\n\t\t\t\t\t\tvalue={username}\n\t\t\t\t\t\tonChange={onChangeUsername}\n\t\t\t\t\t\thelp={sprintf(\n\t\t\t\t\t\t\t'%s %s',\n\t\t\t\t\t\t\t__('Channel username.'),\n\t\t\t\t\t\t\t__('Leave empty for default.'),\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tplaceholder={savedSettings?.username || 'WPTelegram'}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('Widget Width')}\n\t\t\t\t\t\tvalue={widget_width}\n\t\t\t\t\t\tonChange={onChangeWidth}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('Widget Height')}\n\t\t\t\t\t\tvalue={widget_height}\n\t\t\t\t\t\tonChange={onChangeHeight}\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<div className={className}>\n\t\t\t\t<label>\n\t\t\t\t\t<Dashicon icon=\"shortcode\" />\n\t\t\t\t\t<span>{__('Telegram Channel Ajax Feed')}</span>\n\t\t\t\t</label>\n\t\t\t\t<code className=\"widget-shortcode\">\n\t\t\t\t\t<Output attributes={attributes} />\n\t\t\t\t</code>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n","import type { Block } from '@wordpress/blocks';\n\nimport type { AjaxWidgetAtts } from '../types';\n\nexport const blockAttributes: Block<AjaxWidgetAtts>['attributes'] = {\n\tusername: {\n\t\ttype: 'string',\n\t\tdefault: '',\n\t},\n\twidget_width: {\n\t\ttype: 'string',\n\t\tdefault: '100%',\n\t},\n\twidget_height: {\n\t\ttype: 'string',\n\t\tdefault: '600',\n\t},\n};\n","import { registerBlockType } from '@wordpress/blocks';\nimport { __ } from '@wpsocio/i18n';\n\nimport type { AjaxWidgetAtts } from '../types';\nimport { Edit } from './Edit';\nimport { Output } from './Output';\nimport { blockAttributes } from './constants';\n\nimport './style.scss';\n\nregisterBlockType<AjaxWidgetAtts>('wptelegram/widget-ajax-channel-feed', {\n\ttitle: __('Telegram Channel Ajax Feed'),\n\ticon: 'format-aside',\n\tcategory: 'wptelegram',\n\tattributes: blockAttributes,\n\tedit: Edit,\n\tsave: ({ attributes }) => {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Output attributes={attributes} />\n\t\t\t</div>\n\t\t);\n\t},\n});\n","import { buildShortCodeFromAtts } from '@wpsocio/utilities/blocks';\n\nconst allowedAtts = ['author_photo', 'num_messages', 'widget_width'];\nconst shortcode = 'wptelegram-widget';\n\nexport const Output: React.FC<{\n\tattributes: Record<string, string | number>;\n}> = ({ attributes }) => {\n\treturn <>{buildShortCodeFromAtts(attributes, allowedAtts, shortcode)}</>;\n};\n","import { InspectorControls } from '@wordpress/block-editor';\nimport type { BlockEditProps } from '@wordpress/blocks';\nimport {\n\tDashicon,\n\tPanelBody,\n\tRadioControl,\n\tTextControl,\n} from '@wordpress/components';\nimport { useCallback } from '@wordpress/element';\n\nimport { __ } from '@wpsocio/i18n';\n\nimport type { LegacyWidgetAtts } from '../types';\nimport { Output } from './Output';\n\nconst getAuthorPhotoOptions = () => [\n\t{ label: 'Auto', value: 'auto' },\n\t{ label: 'Always show', value: 'always_show' },\n\t{ label: 'Always hide', value: 'always_hide' },\n];\n\nexport const Edit: React.FC<BlockEditProps<LegacyWidgetAtts>> = ({\n\tattributes,\n\tsetAttributes,\n\tclassName,\n}) => {\n\tconst { widget_width, author_photo, num_messages } = attributes;\n\n\tconst onChangeAuthorPhoto = useCallback(\n\t\t(newStyle: string) =>\n\t\t\tsetAttributes({\n\t\t\t\tauthor_photo: newStyle as LegacyWidgetAtts['author_photo'],\n\t\t\t}),\n\t\t[setAttributes],\n\t);\n\tconst onChangeWidth = useCallback(\n\t\t(newWidth: string) =>\n\t\t\tsetAttributes({\n\t\t\t\twidget_width: newWidth as LegacyWidgetAtts['widget_width'],\n\t\t\t}),\n\t\t[setAttributes],\n\t);\n\tconst onChangeNum = useCallback(\n\t\t(newValue: string) =>\n\t\t\tsetAttributes({\n\t\t\t\tnum_messages: Number.parseInt(newValue) || 5,\n\t\t\t}),\n\t\t[setAttributes],\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={__('Widget Options')}>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('Widget Width')}\n\t\t\t\t\t\tvalue={widget_width}\n\t\t\t\t\t\tonChange={onChangeWidth}\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tmin=\"10\"\n\t\t\t\t\t\tmax=\"100\"\n\t\t\t\t\t/>\n\t\t\t\t\t<RadioControl\n\t\t\t\t\t\tlabel={__('Author Photo')}\n\t\t\t\t\t\tselected={author_photo}\n\t\t\t\t\t\tonChange={onChangeAuthorPhoto}\n\t\t\t\t\t\toptions={getAuthorPhotoOptions()}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('Number of Messages')}\n\t\t\t\t\t\tvalue={num_messages}\n\t\t\t\t\t\tonChange={onChangeNum}\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\tmax=\"50\"\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<div className={className} key=\"shortcode\">\n\t\t\t\t<label>\n\t\t\t\t\t<Dashicon icon=\"shortcode\" />\n\t\t\t\t\t<span>{__('Telegram Channel Feed')}</span>\n\t\t\t\t</label>\n\t\t\t\t<code className=\"widget-shortcode\">\n\t\t\t\t\t<Output attributes={attributes} />\n\t\t\t\t</code>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n","import type { Block } from '@wordpress/blocks';\n\nimport type { LegacyWidgetAtts } from '../types';\n\nexport const blockAttributes: Block<LegacyWidgetAtts>['attributes'] = {\n\twidget_width: {\n\t\ttype: 'string',\n\t\tdefault: '100',\n\t},\n\tauthor_photo: {\n\t\ttype: 'string',\n\t\tdefault: 'auto',\n\t},\n\tnum_messages: {\n\t\ttype: 'string',\n\t\tdefault: '5',\n\t},\n};\n","import { registerBlockType } from '@wordpress/blocks';\nimport { __ } from '@wpsocio/i18n';\n\nimport { Edit } from './Edit';\nimport { Output } from './Output';\nimport { blockAttributes } from './constants';\n\nimport './style.scss';\n\nregisterBlockType('wptelegram/widget-channel-feed', {\n\ttitle: __('Telegram Channel Feed'),\n\ticon: 'format-aside',\n\tcategory: 'wptelegram',\n\tattributes: blockAttributes,\n\tedit: Edit,\n\tsave: ({ attributes }) => {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Output attributes={attributes} />\n\t\t\t</div>\n\t\t);\n\t},\n});\n","import { usePluginData } from '@wpsocio/services';\nimport type { WPTelegramWidgetData } from './types';\n\nexport const useData = <\n\tK extends keyof WPTelegramWidgetData | undefined = undefined,\n>(\n\tkey?: K,\n): K extends keyof WPTelegramWidgetData\n\t? WPTelegramWidgetData[K]\n\t: WPTelegramWidgetData => {\n\treturn usePluginData('wptelegram_widget', key);\n};\n","import {\n\tBlockAlignmentToolbar,\n\tBlockControls,\n\tInspectorControls,\n} from '@wordpress/block-editor';\nimport { PanelBody, TextControl } from '@wordpress/components';\nimport { Fragment, useCallback, useEffect } from '@wordpress/element';\n\nimport { __ } from '@wpsocio/i18n';\n\nimport type { JoinChannelAtts } from '../types';\nimport { useData } from '../useData';\n\nexport type ControlsProps = {\n\tsetAttributes: (newAttributes: Partial<JoinChannelAtts>) => void;\n\tattributes: JoinChannelAtts;\n};\n\nexport const Controls: React.FC<ControlsProps> = ({\n\tsetAttributes,\n\tattributes,\n}) => {\n\tconst { alignment, link, text } = attributes;\n\n\tconst { join_link_text, join_link_url } = useData('uiData');\n\n\tuseEffect(() => {\n\t\tif (!link) {\n\t\t\tsetAttributes({ link: join_link_url });\n\t\t}\n\t\tif (!text) {\n\t\t\tsetAttributes({ text: join_link_text });\n\t\t}\n\t}, []);\n\n\tconst onChangeChannelLink = useCallback(\n\t\t(newValue: string) => setAttributes({ link: newValue }),\n\t\t[setAttributes],\n\t);\n\tconst onChangeButtonText = useCallback(\n\t\t(newValue: string) => setAttributes({ text: newValue }),\n\t\t[setAttributes],\n\t);\n\tconst onChangeAlign = useCallback(\n\t\t(align: JoinChannelAtts['alignment']) =>\n\t\t\tsetAttributes({ alignment: align }),\n\t\t[setAttributes],\n\t);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<InspectorControls key=\"controls\">\n\t\t\t\t<PanelBody title={__('Button details')}>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('Channel Link')}\n\t\t\t\t\t\tvalue={link || ''}\n\t\t\t\t\t\tonChange={onChangeChannelLink}\n\t\t\t\t\t\ttype=\"url\"\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('Button text')}\n\t\t\t\t\t\tvalue={text || ''}\n\t\t\t\t\t\tonChange={onChangeButtonText}\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<BlockControls>\n\t\t\t\t<BlockAlignmentToolbar value={alignment} onChange={onChangeAlign} />\n\t\t\t</BlockControls>\n\t\t</Fragment>\n\t);\n};\n","import { G, Path, SVG } from '@wordpress/components';\n\nexport const TelegramIcon = ({ fill = '#ffffff' }) => {\n\treturn (\n\t\t<SVG width=\"19px\" height=\"16px\" viewBox=\"0 0 19 16\">\n\t\t\t<G fill=\"none\">\n\t\t\t\t<Path\n\t\t\t\t\tfill={fill}\n\t\t\t\t\td=\"M0.465,6.638 L17.511,0.073 C18.078,-0.145 18.714,0.137 18.932,0.704 C19.009,0.903 19.026,1.121 18.981,1.33 L16.042,15.001 C15.896,15.679 15.228,16.111 14.549,15.965 C14.375,15.928 14.211,15.854 14.068,15.748 L8.223,11.443 C7.874,11.185 7.799,10.694 8.057,10.345 C8.082,10.311 8.109,10.279 8.139,10.249 L14.191,4.322 C14.315,4.201 14.317,4.002 14.195,3.878 C14.091,3.771 13.926,3.753 13.8,3.834 L5.602,9.138 C5.112,9.456 4.502,9.528 3.952,9.333 L0.486,8.112 C0.077,7.967 -0.138,7.519 0.007,7.11 C0.083,6.893 0.25,6.721 0.465,6.638 Z\"\n\t\t\t\t/>\n\t\t\t</G>\n\t\t</SVG>\n\t);\n};\n","import { Button } from '@wordpress/components';\nimport { TelegramIcon } from './TelegramIcon';\n\nexport type JoinButtonProps = {\n\tlink: string;\n\ttext: string;\n\tisEditing?: boolean;\n};\n\nexport const JoinButton: React.FC<JoinButtonProps> = ({\n\tlink,\n\ttext,\n\tisEditing,\n}) => {\n\treturn (\n\t\t<Button\n\t\t\thref={link}\n\t\t\tclassName=\"join-link\"\n\t\t\ticon={<TelegramIcon />}\n\t\t\ttarget={isEditing ? '_blank' : undefined}\n\t\t\trel=\"noopener noreferrer\"\n\t\t>\n\t\t\t{text}\n\t\t</Button>\n\t);\n};\n","import type { Block } from '@wordpress/blocks';\n\nimport type { JoinChannelAtts } from '../types';\n\nexport const blockAttributes: Block<JoinChannelAtts>['attributes'] = {\n\tlink: {\n\t\ttype: 'string',\n\t},\n\ttext: {\n\t\ttype: 'string',\n\t},\n\talignment: {\n\t\ttype: 'string',\n\t\tdefault: 'center',\n\t},\n};\n","import { useBlockProps } from '@wordpress/block-editor';\nimport { registerBlockType } from '@wordpress/blocks';\n\nimport { __ } from '@wpsocio/i18n';\n\nimport { Controls } from './Controls';\nimport { JoinButton } from './JoinButton';\nimport { TelegramIcon } from './TelegramIcon';\n\nimport { blockAttributes } from './constants';\n\nimport './style.scss';\n\nregisterBlockType('wptelegram/widget-join-channel', {\n\tapiVersion: 3,\n\ttitle: __('Join Telegram Channel'),\n\ticon: <TelegramIcon fill=\"#555d66\" />,\n\tcategory: 'wptelegram',\n\tattributes: blockAttributes,\n\tgetEditWrapperProps: (attributes) => {\n\t\tconst { alignment } = attributes;\n\t\tif (['left', 'center', 'right', 'wide', 'full'].includes(alignment)) {\n\t\t\treturn { 'data-align': alignment };\n\t\t}\n\t\treturn { 'data-align': '' };\n\t},\n\tedit: ({ attributes, setAttributes }) => {\n\t\tconst blockProps = useBlockProps({\n\t\t\tclassName: `align${attributes.alignment}`,\n\t\t});\n\n\t\treturn (\n\t\t\t<div {...blockProps}>\n\t\t\t\t<Controls attributes={attributes} setAttributes={setAttributes} />\n\t\t\t\t<JoinButton {...attributes} isEditing />\n\t\t\t</div>\n\t\t);\n\t},\n\t// Save is handled by PHP via render_callback\n\t// because WP blocks sometimes suck big time\n\t// by failing block validation for no reason\n\t// save: null\n\t/* save: ({ attributes }) => {\n\t\tconst blockProps = useBlockProps.save();\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\t{...blockProps}\n\t\t\t\tclassName={`wp-block-wptelegram-widget-join-channel align${attributes.alignment}`}\n\t\t\t>\n\t\t\t\t<JoinButton {...attributes} />\n\t\t\t</div>\n\t\t);\n\t}, */\n\tdeprecated: [\n\t\t{\n\t\t\tattributes: blockAttributes,\n\t\t\tsave() {\n\t\t\t\treturn null;\n\t\t\t},\n\t\t},\n\t],\n});\n","import {\n\tBlockAlignmentToolbar,\n\tBlockControls,\n\tInspectorControls,\n} from '@wordpress/block-editor';\nimport {\n\tPanelBody,\n\tToggleControl,\n\tToolbarButton,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport { Fragment } from '@wordpress/element';\nimport { __ } from '@wpsocio/i18n';\n\nexport type ControlsProps = {\n\tuserpic: boolean;\n\ttoggleUserPic: VoidFunction;\n\tshowEditButton: boolean;\n\tswitchBackToURLInput: VoidFunction;\n\talignment: NonNullable<BlockAlignmentToolbar.Props['controls']>[number];\n\tchangeAlignment: NonNullable<BlockAlignmentToolbar.Props['onChange']>;\n};\n\nexport const Controls: React.FC<ControlsProps> = (props) => {\n\tconst {\n\t\tuserpic,\n\t\ttoggleUserPic,\n\t\tshowEditButton,\n\t\tswitchBackToURLInput,\n\t\talignment,\n\t\tchangeAlignment,\n\t} = props;\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={__('Options')}>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={__('Author Photo')}\n\t\t\t\t\t\tchecked={userpic}\n\t\t\t\t\t\tonChange={toggleUserPic}\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<BlockControls>\n\t\t\t\t<BlockAlignmentToolbar value={alignment} onChange={changeAlignment} />\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t{showEditButton && (\n\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\tclassName=\"components-toolbar__control\"\n\t\t\t\t\t\t\ttitle={__('Edit URL')}\n\t\t\t\t\t\t\ticon=\"edit\"\n\t\t\t\t\t\t\tonClick={switchBackToURLInput}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t</Fragment>\n\t);\n};\n","import { Button, Placeholder as WPPlaceholder } from '@wordpress/components';\n\nimport { __ } from '@wpsocio/i18n';\n\nconst errorStyle: React.CSSProperties = { border: '2px solid #f71717' };\n\ntype PlaceholderProps = {\n\terror?: boolean;\n\tlabel: string;\n\tonChangeURL: (event: React.ChangeEvent<HTMLInputElement>) => void;\n\tonSubmit: (event: React.FormEvent<HTMLFormElement>) => void;\n\turl: string;\n};\n\nexport const Placeholder: React.FC<PlaceholderProps> = ({\n\terror,\n\tlabel,\n\tonChangeURL,\n\tonSubmit,\n\turl,\n}) => {\n\tconst style = error ? errorStyle : undefined;\n\n\treturn (\n\t\t<WPPlaceholder\n\t\t\ticon=\"wordpress-alt\"\n\t\t\tlabel={label}\n\t\t\tclassName=\"wp-block-embed-telegram\"\n\t\t>\n\t\t\t<form onSubmit={onSubmit}>\n\t\t\t\t<input\n\t\t\t\t\taria-label={label}\n\t\t\t\t\tclassName=\"components-placeholder__input\"\n\t\t\t\t\tonChange={onChangeURL}\n\t\t\t\t\tplaceholder=\"https://t.me/WPTelegram/102\"\n\t\t\t\t\tstyle={style}\n\t\t\t\t\ttype=\"url\"\n\t\t\t\t\tvalue={url || ''}\n\t\t\t\t/>\n\t\t\t\t<Button type=\"submit\">{__('Embed')}</Button>\n\t\t\t</form>\n\t\t</WPPlaceholder>\n\t);\n};\n","import type { BlockEditProps } from '@wordpress/blocks';\nimport { Spinner } from '@wordpress/components';\nimport { useFocusableIframe, useMergeRefs } from '@wordpress/compose';\nimport { Fragment, useEffect, useRef, useState } from '@wordpress/element';\nimport { addQueryArgs } from '@wordpress/url';\nimport { __ } from '@wpsocio/i18n';\nimport type { SinglePostAtts } from '../types';\nimport { Controls } from './Controls';\nimport { Placeholder } from './Placeholder';\n\nconst { message_view_url } = window.wptelegram_widget.assets;\n\nexport function Edit(props: BlockEditProps<SinglePostAtts>) {\n\tconst [iframeState, setIframeState] = useState<'loading' | 'idle' | 'error'>(\n\t\t'loading',\n\t);\n\tconst [isEditingURL, setIsEditingURL] = useState(false);\n\tconst [url, setUrl] = useState(props.attributes.url || '');\n\tconst [userpic, setUserpic] = useState<boolean>(\n\t\tprops.attributes.userpic || true,\n\t);\n\tconst [iframeHeight, setIframeHeight] = useState(0);\n\n\tconst { className } = props;\n\tconst { alignment, iframe_src } = props.attributes;\n\n\tconst label = __('Telegram post URL');\n\n\tfunction onChangeURL(event: React.ChangeEvent<HTMLInputElement>) {\n\t\tsetUrl(event.target.value);\n\t}\n\n\tfunction updateUrl(event: React.FormEvent<HTMLFormElement>) {\n\t\tif (event) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tconst regex =\n\t\t\t/^(?:https?:\\/\\/)?t\\.me\\/(?<username>[a-z][a-z0-9_]{3,30}[a-z0-9])\\/(?<message_id>\\d+)$/i;\n\t\tconst match = url.match(regex);\n\t\t// validate URL\n\t\tif (null === match) {\n\t\t\tsetIframeState('error');\n\t\t} else {\n\t\t\tconst iframe_src = getIframeSrc(\n\t\t\t\tmatch.groups as {\n\t\t\t\t\tusername: string;\n\t\t\t\t\tmessage_id: string;\n\t\t\t\t},\n\t\t\t);\n\t\t\tconst { setAttributes } = props;\n\n\t\t\tsetIframeState('loading');\n\t\t\tsetIsEditingURL(false);\n\t\t\tsetAttributes({ url, iframe_src });\n\t\t}\n\t}\n\n\tfunction getIframeSrc(data: { username: string; message_id: string }) {\n\t\treturn message_view_url\n\t\t\t.replace('%username%', data.username)\n\t\t\t.replace('%message_id%', data.message_id)\n\t\t\t.replace('%userpic%', `${userpic}`);\n\t}\n\n\tfunction toggleUserPic() {\n\t\tsetUserpic((prevValue) => {\n\t\t\tconst newValue = !prevValue;\n\n\t\t\tsetIframeState('loading');\n\t\t\tlet { iframe_src } = props.attributes;\n\t\t\tiframe_src = addQueryArgs(iframe_src, { userpic });\n\t\t\tprops.setAttributes({ userpic: newValue, iframe_src });\n\n\t\t\treturn newValue;\n\t\t});\n\t}\n\n\tfunction onChangeAlign(align: SinglePostAtts['alignment']) {\n\t\tresizeIframe();\n\t\tprops.setAttributes({ alignment: align });\n\t}\n\tconst iframeRef = useRef<HTMLIFrameElement | null>();\n\tconst ref = useMergeRefs([iframeRef, useFocusableIframe()]);\n\n\tfunction resizeIframe() {\n\t\tif (\n\t\t\tnull === iframeRef?.current ||\n\t\t\t'undefined' === typeof iframeRef?.current?.contentWindow\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tconst iframe_height =\n\t\t\tiframeRef?.current?.contentWindow?.document.body.scrollHeight;\n\t\tif (iframe_height !== iframeHeight) {\n\t\t\tsetIframeHeight(iframe_height || 0);\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('resize', resizeIframe);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('resize', resizeIframe);\n\t\t};\n\t}, []);\n\n\tif (isEditingURL || !iframe_src) {\n\t\treturn (\n\t\t\t<Placeholder\n\t\t\t\tlabel={label}\n\t\t\t\terror={iframeState === 'error'}\n\t\t\t\turl={url}\n\t\t\t\tonChangeURL={onChangeURL}\n\t\t\t\tonSubmit={updateUrl}\n\t\t\t/>\n\t\t);\n\t}\n\n\tconst iframe_height = iframeState === 'loading' ? 0 : iframeHeight;\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<Controls\n\t\t\t\tuserpic={userpic}\n\t\t\t\ttoggleUserPic={toggleUserPic}\n\t\t\t\tshowEditButton\n\t\t\t\tswitchBackToURLInput={() => setIsEditingURL(true)}\n\t\t\t\talignment={alignment}\n\t\t\t\tchangeAlignment={onChangeAlign}\n\t\t\t/>\n\t\t\t{iframeState === 'loading' && (\n\t\t\t\t<div className=\"wp-block-embed is-loading\">\n\t\t\t\t\t<Spinner />\n\t\t\t\t\t<p>{__('Loading…')}</p>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<div className={`${className} wptelegram-widget-message`}>\n\t\t\t\t<div className={'wp-block-embed__content-wrapper'}>\n\t\t\t\t\t<iframe\n\t\t\t\t\t\tref={ref}\n\t\t\t\t\t\tsrc={iframe_src}\n\t\t\t\t\t\tonLoad={() => {\n\t\t\t\t\t\t\tsetIframeState('idle');\n\t\t\t\t\t\t\tresizeIframe();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\theight={iframe_height}\n\t\t\t\t\t\ttitle={__('Telegram post')}\n\t\t\t\t\t>\n\t\t\t\t\t\tYour Browser Does Not Support iframes!\n\t\t\t\t\t</iframe>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Fragment>\n\t);\n}\n","import type { Block } from '@wordpress/blocks';\n\nimport type { SinglePostAtts } from '../types';\n\nexport const blockAttributes: Block<SinglePostAtts>['attributes'] = {\n\turl: {\n\t\ttype: 'string',\n\t\tdefault: '',\n\t},\n\tiframe_src: {\n\t\ttype: 'string',\n\t\tdefault: '',\n\t},\n\tuserpic: {\n\t\ttype: 'boolean',\n\t\tdefault: true,\n\t},\n\talignment: {\n\t\ttype: 'string',\n\t\tdefault: 'center',\n\t},\n};\n","import { registerBlockType } from '@wordpress/blocks';\n\nimport { __ } from '@wpsocio/i18n';\n\nimport { Edit } from './Edit';\nimport { blockAttributes } from './constants';\n\nregisterBlockType('wptelegram/widget-single-post', {\n\ttitle: __('Telegram Single Post'),\n\ticon: 'format-aside',\n\tcategory: 'wptelegram',\n\tgetEditWrapperProps: (attributes) => {\n\t\tconst { alignment } = attributes;\n\t\tif (['left', 'center', 'right', 'wide', 'full'].includes(alignment)) {\n\t\t\treturn { 'data-align': alignment.toString() };\n\t\t}\n\t\treturn { 'data-align': '' };\n\t},\n\tattributes: blockAttributes,\n\n\tedit: Edit,\n\n\tsave: ({ attributes }) => {\n\t\tconst { alignment, iframe_src } = attributes;\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={`wp-block-wptelegram-widget-single-post wptelegram-widget-message align${alignment}`}\n\t\t\t>\n\t\t\t\t<iframe title={__('Telegram post')} src={iframe_src}>\n\t\t\t\t\tYour Browser Does Not Support iframes!\n\t\t\t\t</iframe>\n\t\t\t</div>\n\t\t);\n\t},\n\tdeprecated: [\n\t\t{\n\t\t\tattributes: blockAttributes,\n\t\t\tsave: ({ attributes }) => {\n\t\t\t\tconst { alignment, iframe_src } = attributes;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`wp-block-wptelegram-widget-single-post wptelegram-widget-message align${alignment}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<iframe src={iframe_src} title={__('Telegram post')}>\n\t\t\t\t\t\t\tYour Browser Does Not Support iframes!\n\t\t\t\t\t\t</iframe>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t],\n});\n"],"names":["buildShortCodeFromAtts","attributes","allowedAtts","shrotcode","attsKV","filter","att","map","atts","length","join","shortcode","Output","savedSettings","_a","Edit","setAttributes","widget_width","widget_height","username","onChangeWidth","useCallback","newWidth","onChangeHeight","newHeight","onChangeUsername","newUsername","__","sprintf","className","blockAttributes","type","default","registerBlockType","getAuthorPhotoOptions","author_photo","num_messages","onChangeAuthorPhoto","newStyle","onChangeNum","newValue","useData","key","usePluginData","Controls","alignment","link","text","join_link_text","join_link_url","useEffect","onChangeChannelLink","onChangeButtonText","onChangeAlign","align","TelegramIcon","fill","JoinButton","isEditing","blockProps","useBlockProps","props","userpic","toggleUserPic","showEditButton","switchBackToURLInput","changeAlignment","errorStyle","Placeholder","error","label","onChangeURL","onSubmit","style","url","message_view_url","iframeState","setIframeState","useState","isEditingURL","setIsEditingURL","setUrl","setUserpic","iframeHeight","setIframeHeight","iframe_src","event","updateUrl","regex","match","iframe_src2","getIframeSrc","data","prevValue","addQueryArgs","resizeIframe","iframeRef","useRef","useMergeRefs","useFocusableIframe","iframe_height2","_c","_b","window","iframe_height"],"mappings":"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"}